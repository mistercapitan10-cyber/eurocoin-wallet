# üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é

## üìä –¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–§–∞–∑–∞ 3: –ë–ª–æ–∫—á–µ–π–Ω-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è)

–°–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`docs/requirements.md`), –ø—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ **–§–∞–∑–µ 3**, –≥–¥–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è:

- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Web3 (wagmi + viem)
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–æ–º ERC-20
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
- ‚úÖ Telegram-–±–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ß–∞—Ç-–±–æ—Ç —Å AI
- ‚úÖ OAuth –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (RU/EN/LT/LV)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (Support Messenger)
- ‚úÖ –£—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç—Ä–µ–∫–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

### 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Å–±–æ—Ä–∫–∞

- ‚úÖ **Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**
  - `docker/Dockerfile` - –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Å–±–æ—Ä–∫–∞
  - `docker/docker-compose.prod.yml` - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
  - Health checks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è PostgreSQL –∏ Redis
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

- ‚úÖ **Next.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
  - Next.js 16.0.0 —Å App Router
  - TypeScript 5.0 –≤ strict mode
  - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

- ‚úÖ **–°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è**
  - `npm run build` - —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ä—Å–∏–∏
  - `npm run start` - –∑–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–µ—Ä–≤–µ—Ä–∞
  - `npm run db:init` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - `npm run db:migrate` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
  - `npm run auth:migrate` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ auth –º–∏–≥—Ä–∞—Ü–∏–π

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ **PostgreSQL —Å—Ö–µ–º–∞**
  - –¢–∞–±–ª–∏—Ü—ã: `exchange_requests`, `internal_requests`, `investigation_stages`, `chatbot_messages`, `support_messages`, `typing_indicators`, `users`, `accounts`, `sessions`, `verification_tokens`
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
  - –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `updated_at`
  - –ú–∏–≥—Ä–∞—Ü–∏–∏: `add_current_stage.sql`, `add-user-id-to-requests.sql`, `add-support-messenger.sql`, `create-nextauth-tables.sql`, `rename-auth-tables.sql`

- ‚úÖ **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î**
  - –°–∫—Ä–∏–ø—Ç `scripts/init-database.ts` —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ Docker –¥–µ–ø–ª–æ–µ

### 3. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- ‚úÖ **NextAuth.js v5 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
  - OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã: Google, GitHub
  - Email –ø—Ä–æ–≤–∞–π–¥–µ—Ä (—á–µ—Ä–µ–∑ Resend) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  - JWT —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è serverless —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  - –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Ö–æ–¥–∞ (`/login`)
  - Middleware –¥–ª—è –∑–∞—â–∏—Ç—ã —Ä–æ—É—Ç–æ–≤

- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
  - MetaMask –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (cookie-based)
  - OAuth (Google, GitHub)
  - Email magic links (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)

### 4. –ë–ª–æ–∫—á–µ–π–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- ‚úÖ **Web3 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (wagmi + viem)**
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–µ—Ç–µ–π: Sepolia (testnet), Ethereum Mainnet
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `config/chains.ts` –∏ `lib/wagmi.tsx`
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ç–µ–π

- ‚úÖ **–†–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–æ–º**
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –≤ `config/token.ts`
  - Fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –Ω–µ–∑–∞–¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ERC-20 ABI

### 5. Backend API

- ‚úÖ **API Routes —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**
  - `/api/submit-request` - –ø–æ–¥–∞—á–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∑–∞—è–≤–æ–∫
  - `/api/submit-exchange-request` - –∑–∞—è–≤–∫–∏ –Ω–∞ –æ–±–º–µ–Ω
  - `/api/investigation/status` - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
  - `/api/telegram-webhook` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –±–æ—Ç–æ–º
  - `/api/chatbot/*` - —á–∞—Ç-–±–æ—Ç endpoints
  - `/api/user/requests` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `/api/support/*` - –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (send-user-message, send-admin-message, get-chat-history, typing-indicator, mark-read)

### 6. Frontend —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ **–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**
  - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –¥–∞—à–±–æ—Ä–¥–æ–º
  - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–º–µ–Ω–∞ (exchange)
  - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

- ‚úÖ **KC–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
  - Wallet –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –±–∞–ª–∞–Ω—Å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
  - Exchange –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, —Ñ–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏)
  - Chatbot –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—á–∞—Ç –≤–∏–¥–∂–µ—Ç, —Å–æ–æ–±—â–µ–Ω–∏—è)
  - Dashboard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π)
  - Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (header, footer, navigation)

- ‚úÖ **–ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4 —è–∑—ã–∫–æ–≤: RU, EN, LT, LV
  - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤ `lib/i18n/translations.ts`
  - –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (desktop –∏ mobile)
  - Fallback –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞

### 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- ‚úÖ **Telegram –±–æ—Ç**
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω webhook endpoint
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É –æ –∑–∞—è–≤–∫–∞—Ö –∏ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
  - –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –æ–±—â–µ–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ Telegram
  - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏ (`/list`, `/exchange`, `/internal`, `/details`)
  - Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞—è–≤–æ–∫
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º –ø–æ–¥–¥–µ—Ä–∂–∫–∏

- ‚úÖ **Email —Å–µ—Ä–≤–∏—Å (Resend)**
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  - Email –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 8. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (—á–∞—Å—Ç–∏—á–Ω–æ)

- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è**
  - Middleware –∑–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ API routes
  - –ó–∞—â–∏—Ç–∞ cookies (httpOnly, secure –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)

- ‚úÖ **–°–µ–∫—Ä–µ—Ç—ã**
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π
  - –ù–∏–∫–∞–∫–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π

### 9. –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∫–∏

- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏**
  - –¢–∞–±–ª–∏—Ü—ã: `support_messages`, `typing_indicators`
  - Real-time –æ–±—â–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∞–¥–º–∏–Ω–∞–º–∏
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –∞–¥–º–∏–Ω–∞
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã "–ø–µ—á–∞—Ç–∞–µ—Ç..." –¥–ª—è –ª—É—á—à–µ–≥–æ UX
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

- ‚úÖ **API –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞**
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∞–¥–º–∏–Ω–∞–º–∏ —á–µ—Ä–µ–∑ Telegram
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
  - Mark as read —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
  - Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞

---

## ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ

#### 1. Security Headers –≤ Next.js

‚úÖ **–ì–û–¢–û–í–û:** Security headers –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `next.config.ts`

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

- **Content-Security-Policy** ‚Äî –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
  - Blockchain: wagmi, viem, Infura, Alchemy, Etherscan, DRPC
  - Exchanges: Dexscreener, CoinGecko, ExchangeRate-API
  - Integrations: Telegram, Resend, MetaMask SDK Analytics
  - UI: Google Fonts, Spline 3D
- **X-Frame-Options** ‚Äî –∑–∞–ø—Ä–µ—Ç –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è
- **X-Content-Type-Options** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç MIME-sniffing
- **Referrer-Policy** ‚Äî —Å—Ç—Ä–æ–≥–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–µ—Ä–æ–≤
- **Permissions-Policy** ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã, –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏, FLoC
- **X-DNS-Prefetch-Control** ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è DNS
- **Strict-Transport-Security** ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π HTTPS (HSTS)

#### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å/–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```env
# Blockchain Configuration (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
NEXT_PUBLIC_TOKEN_ADDRESS=0x88F43B9f5A6d4ADEF8f80D646732F5b6153C2586
NEXT_PUBLIC_TOKEN_SYMBOL=EURC
NEXT_PUBLIC_TOKEN_DECIMALS=18
NEXT_PUBLIC_TOKEN_CHAIN_ID= # 1 –¥–ª—è Mainnet, 11155111 –¥–ª—è Sepolia

# RPC URLs (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û - –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–∏)
NEXT_PUBLIC_RPC_URL_SEPOLIA=https://sepolia.infura.io/v3/YOUR_KEY
NEXT_PUBLIC_RPC_URL_MAINNET=https://mainnet.infura.io/v3/YOUR_KEY

# Pricing Configuration
NEXT_PUBLIC_PRICE_SOURCE=coingecko
NEXT_PUBLIC_COINGECKO_TOKEN_ID=euro-coin
NEXT_PUBLIC_TOKEN_PRICE_USD=1.00

# Exchange Configuration
NEXT_PUBLIC_EXCHANGE_RATE_RUB_PER_TOKEN=150
NEXT_PUBLIC_EXCHANGE_COMMISSION_PERCENT=1.5

# Database (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
DATABASE_URL=postgresql://user:password@host:5432/web_wallet_db

# OAuth Configuration (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è OAuth)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# NextAuth (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
AUTH_SECRET=generate_with: openssl rand -base64 32
NEXTAUTH_URL=https://your-domain.com

# Telegram Bot (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è Telegram —Ñ—É–Ω–∫—Ü–∏–π)
TELEGRAM_API_KEY=your_telegram_bot_token
TELEGRAM_ADMIN_CHAT_ID=your_telegram_chat_id  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
# –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: TELEGRAM_MANAGER_CHAT_ID —É—Å—Ç–∞—Ä–µ–ª, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ TELEGRAM_ADMIN_CHAT_ID

# Email Service (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è email –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxx
SENDER_EMAIL=noreply@yourdomain.com
RECIPIENT_EMAIL=support@yourdomain.com

# App Configuration
NEXT_PUBLIC_APP_NAME=EuroCoin Wallet
NEXT_PUBLIC_APP_URL=https://your-domain.com  # –î–ª—è webhooks –∏ —Å—Å—ã–ª–æ–∫
NODE_ENV=production

# Email Auth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
ENABLE_EMAIL_AUTH=true  # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ true –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è email auth

# External Services (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# –î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Memberstack –∏ —Ç.–¥.)
EXTERNAL_SERVICE_ENABLED=false  # –≤–∫–ª—é—á–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
EXTERNAL_SERVICE_API_URL=https://api.memberstack.com
EXTERNAL_SERVICE_API_KEY=your_api_key
```

**–î–µ–π—Å—Ç–≤–∏—è:**

- [ ] –ü–æ–ª—É—á–∏—Ç—å RPC –∫–ª—é—á–∏ –æ—Ç Infura –∏–ª–∏ Alchemy
- [ ] –°–æ–∑–¥–∞—Ç—å OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Google Cloud Console –∏ GitHub
- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `AUTH_SECRET` –¥–ª—è NextAuth
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram –±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather
- [ ] –ü–æ–ª—É—á–∏—Ç—å Resend API –∫–ª—é—á –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL

#### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - –≤–∫–ª—é—á–∏—Ç—å Drizzle Adapter

‚úÖ **–ì–û–¢–û–í–û:** Drizzle Adapter –≤–∫–ª—é—á–µ–Ω –≤ `lib/auth.ts`

–ê–¥–∞–ø—Ç–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `DATABASE_URL`:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ —Å—Ö–µ–º—ã Drizzle
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç OAuth –∏ Email –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- JWT —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å serverless (Vercel)

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**

- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è auth —Ç–∞–±–ª–∏—Ü –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ (`npm run auth:migrate`)
- [ ] –¢–∞–±–ª–∏—Ü—ã `users`, `accounts`, `sessions`, `verification_tokens` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ë–î
- [ ] `DATABASE_URL` –∑–∞–¥–∞–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Webhook

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω—É–∂–Ω–æ:**

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook URL: `https://api.telegram.org/bot<TOKEN>/setWebhook?url=https://your-domain.com/api/telegram-webhook`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ webhook —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 5. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**

- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–æ–º–µ–Ω –∏–º–µ–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ Vercel)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ HTTPS

### üü° –í–∞–∂–Ω–æ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º)

#### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ production-like –æ–∫—Ä—É–∂–µ–Ω–∏–∏

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** –°–º. [`docs/production-testing-guide.md`](./production-testing-guide.md)

**–ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç:**

- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ñ–ª–æ—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å OAuth –≤—Ö–æ–¥ (Google, GitHub)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ (exchange –∏ internal)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
  - [ ] –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (`/list`, `/exchange`, `/internal`, `/details`)
  - [ ] Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
  - [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–∞—Ç-–±–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  - [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - [ ] –û—Ç–≤–µ—Ç—ã –∞–¥–º–∏–Ω–∞ —á–µ—Ä–µ–∑ Telegram
  - [ ] –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞
  - [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã "–ø–µ—á–∞—Ç–∞–µ—Ç..."
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ (RU/EN/LT/LV)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (Lighthouse)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä bundle

#### 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:**

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ (Sentry, LogRocket, –∏–ª–∏ Vercel Analytics)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

#### 8. Rate Limiting

**–î–ª—è –∑–∞—â–∏—Ç—ã API endpoints:**

- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è API routes
- [ ] –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è:
  - `/api/submit-request`
  - `/api/submit-exchange-request`
  - `/api/telegram-webhook`
  - `/api/support/send-user-message` (—É–∂–µ –µ—Å—Ç—å –±–∞–∑–æ–≤—ã–π rate limiting: 10 —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω—É—Ç—É)

#### 9. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã PostgreSQL
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

#### 10. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä bundle (Next.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü (Lighthouse)
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ next.config.ts)

### üü¢ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–º–æ–∂–Ω–æ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è)

#### 11. –ó–≤—É–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `notification-bell.mp3` –¥–ª—è –∑–≤—É–∫–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

**–†–µ—à–µ–Ω–∏–µ:**

- –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª `public/sounds/notification-bell.mp3`
- –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∑–≤—É–∫–∞
- –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∑–≤—É–∫–∞ —á–µ—Ä–µ–∑ Web Audio API (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω fallback –≤ `chat-widget.tsx`)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞.

#### 12. Analytics

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É (Google Analytics, Vercel Analytics)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–π

#### 13. Error Boundaries

- [ ] –î–æ–±–∞–≤–∏—Ç—å React Error Boundaries –¥–ª—è graceful error handling

#### 14. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] –û–±–Ω–æ–≤–∏—Ç—å README —Å production –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å runbook –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–æ–º–µ–Ω –∏ DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CDN (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, Vercel –≤–∫–ª—é—á–∞–µ—Ç)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [x] Security headers –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `next.config.ts` ‚úÖ
- [ ] Drizzle Adapter –≤–∫–ª—é—á–µ–Ω –≤ `lib/auth.ts`
- [ ] Telegram webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω—ã –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –ë–î
  - [ ] –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (exchange_requests, internal_requests, chatbot_sessions)
  - [ ] Auth —Ç–∞–±–ª–∏—Ü—ã (users, accounts, sessions, verification_tokens)
  - [ ] Messenger —Ç–∞–±–ª–∏—Ü—ã (support_messages, typing_indicators)
  - [ ] –í—Å–µ SQL —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –≤—Å–µ—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã (–µ—Å–ª–∏ –±—ã–ª–∏)
- [ ] –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ testnet (Sepolia)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- [x] Security headers –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã ‚úÖ
- [ ] HTTPS –≤–∫–ª—é—á–µ–Ω
- [x] –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ git ‚úÖ
- [ ] Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ê–ª–µ—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üöÄ –ü–ª–∞–Ω –¥–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: Vercel (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**

   ```bash
   # –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–¥ –≥–æ—Ç–æ–≤
   npm run build
   npm run lint
   npm run type-check
   ```

2. **–î–µ–ø–ª–æ–π:**

   ```bash
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Vercel CLI
   npm i -g vercel

   # –î–µ–ø–ª–æ–π
   vercel --prod
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Vercel Dashboard:**
   - [ ] –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL —á–µ—Ä–µ–∑ Vercel Postgres –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω
   - [ ] –í–∫–ª—é—á–∏—Ç—å HTTPS

4. **Post-deploy:**
   - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏: `vercel env pull && npm run db:migrate && npm run auth:migrate`
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram webhook –Ω–∞ –Ω–æ–≤—ã–π URL: `https://api.telegram.org/bot<TOKEN>/setWebhook?url=https://your-domain.com/api/telegram-webhook`
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —è–∑—ã–∫–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker (–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:**

   ```bash
   # –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
   git clone <repository>
   cd web-wallet
   ```

2. **–°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª** —Å –≤—Å–µ–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å:**

   ```bash
   docker compose -f docker/docker-compose.prod.yml up -d --build
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**

   ```bash
   docker compose -f docker/docker-compose.prod.yml logs -f
   ```

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx reverse proxy** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —á–µ—Ä–µ–∑ Let's Encrypt
   - Proxy –Ω–∞ –ø–æ—Ä—Ç 3000

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è           | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å                                      |
| ------------------- | ---------- | ------------------------------------------- |
| **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**  | 90%        | ‚úÖ Docker –≥–æ—Ç–æ–≤, –Ω—É–∂–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**     | 95%        | ‚úÖ –°—Ö–µ–º–∞ –≥–æ—Ç–æ–≤–∞, –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã     |
| **Frontend**        | 95%        | ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã                    |
| **Backend API**     | 90%        | ‚úÖ –í—Å–µ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã                |
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**  | 95%        | ‚úÖ OAuth —Ä–∞–±–æ—Ç–∞–µ—Ç, adapter –≤–∫–ª—é—á–µ–Ω          |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**    | 95%        | ‚úÖ Security headers –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã               |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**      | 90%        | ‚úÖ Telegram, Email –≥–æ—Ç–æ–≤—ã, –Ω—É–∂–Ω—ã –∫–ª—é—á–∏      |
| **–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä**      | 100%       | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω        |
| **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** | 95%        | ‚úÖ 4 —è–∑—ã–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è                   |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**    | 85%        | ‚úÖ –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç—å    |

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: ~94%** (—É–ª—É—á—à–µ–Ω–æ –∑–∞ —Å—á–µ—Ç –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

---

## ‚è±Ô∏è –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫ –¥–µ–ø–ª–æ—é

| –ó–∞–¥–∞—á–∞                                     | –í—Ä–µ–º—è         |
| ------------------------------------------ | ------------- |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ security headers                 | ‚úÖ –ì–û–¢–û–í–û     |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Drizzle Adapter                  | ‚úÖ –ì–û–¢–û–í–û     |
| –ú–∏–≥—Ä–∞—Ü–∏—è support messenger                 | ‚úÖ –ì–û–¢–û–í–û     |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è | 2-3 —á–∞—Å–∞      |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ production-like –æ–∫—Ä—É–∂–µ–Ω–∏–∏  | 3-4 —á–∞—Å–∞      |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–±–∞–∑–æ–≤–∞—è)            | 1 —á–∞—Å         |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—ç–∫–∞–ø–æ–≤ –ë–î                       | 30 –º–∏–Ω—É—Ç      |
| **–ò—Ç–æ–≥–æ**                                  | **6-8 —á–∞—Å–æ–≤** |

---

## üìù –†–µ–∑—é–º–µ

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥–ª—è –¥–µ–ø–ª–æ—è. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞.

**–ì–ª–∞–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:**

1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å security headers –≤ `next.config.ts` (–ì–û–¢–û–í–û)
2. ‚úÖ –í–∫–ª—é—á–∏—Ç—å Drizzle Adapter –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ë–î (–ì–û–¢–û–í–û)
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é support messenger –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å (–ì–û–¢–û–í–û)
4. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å CSP –Ω–∞—Ä—É—à–µ–Ω–∏—è –¥–ª—è ExchangeRate API –∏ MetaMask SDK (–ì–û–¢–û–í–û)
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å unique constraint –¥–ª—è chatbot_sessions (–ì–û–¢–û–í–û)
6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è `TELEGRAM_ADMIN_CHAT_ID`)
7. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram webhook –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
8. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∫–∏, 4 —è–∑—ã–∫–∞)
9. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ production-like –æ–∫—Ä—É–∂–µ–Ω–∏–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∑–∞–¥–∞—á –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –¥–µ–ø–ª–æ—é.

---

## üìå –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞

### Support Messenger System

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º –æ–±—â–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ Telegram.

**–ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î:**

- `support_messages` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- `typing_indicators` - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã "–ø–µ—á–∞—Ç–∞–µ—Ç..."

**–ù–æ–≤—ã–µ API endpoints:**

- `POST /api/support/send-user-message` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- `POST /api/support/send-admin-message` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –∞–¥–º–∏–Ω–æ–º
- `GET /api/support/get-chat-history` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
- `POST /api/support/typing-indicator` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø–µ—á–∞—Ç–∏
- `POST /api/support/mark-read` - –æ—Ç–º–µ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö

**–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î:**

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ `npm run db:init` (–≤–∫–ª—é—á–µ–Ω–æ –≤ `lib/database/init.ts`)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**

- [`docs/MESSENGER_README.md`](./MESSENGER_README.md) - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- [`docs/messenger-phase1-completed.md`](./messenger-phase1-completed.md) - –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∞–∑—ã 1
- [`docs/messenger-phase2-completed.md`](./messenger-phase2-completed.md) - –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∞–∑—ã 2

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ —Å 2 –¥–æ 4 —è–∑—ã–∫–æ–≤:

- üá∑üá∫ –†—É—Å—Å–∫–∏–π (ru)
- üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (en)
- üá±üáπ –õ–∏—Ç–æ–≤—Å–∫–∏–π (lt)
- üá±üáª –õ–∞—Ç—ã—à—Å–∫–∏–π (lv)

–í—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ `lib/i18n/translations.ts`. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –Ω–∞ —Ä—É—Å—Å–∫–∏–π.

### User Tracking –∏ External Sync

–ü–ª–∞–Ω—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º —É—á–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏:

- [`docs/user-tracking-implementation-plan.md`](./user-tracking-implementation-plan.md)
- [`docs/external-user-sync-plan.md`](./external-user-sync-plan.md)

**–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω—ã –≥–æ—Ç–æ–≤—ã, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ.

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Content Security Policy (CSP) Violations

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –¥–µ–ø–ª–æ–µ CSP –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º:

- `api.exchangerate-api.com` ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç
- `mm-sdk-analytics.api.cx.metamask.io` ‚Äî –¥–ª—è MetaMask SDK –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–º–µ–Ω—ã –≤ `connect-src` –¥–∏—Ä–µ–∫—Ç–∏–≤—É CSP –≤ `next.config.ts`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### Support Messenger Database Migration

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞–±–ª–∏—Ü—ã `support_messages` –∏ `typing_indicators` –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –≤ `lib/database/init.ts` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### Chatbot Sessions Unique Constraint

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª unique constraint –Ω–∞ `user_wallet_address` –≤ `chatbot_sessions`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `ON CONFLICT` –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `add-unique-wallet-to-sessions.sql` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### Missing Notification Sound File

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∞–π–ª `public/sounds/notification-bell.mp3`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç 404 –æ—à–∏–±–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**

- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω fallback —á–µ—Ä–µ–∑ Web Audio API –≤ `chat-widget.tsx`
- –§–∞–π–ª –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –ø–æ –∂–µ–ª–∞–Ω–∏—é

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, fallback —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 31 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.2
